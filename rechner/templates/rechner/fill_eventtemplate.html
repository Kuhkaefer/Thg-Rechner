{% extends 'rechner/base.html' %}

{% block title %}
{{ page_name }}
{% endblock %}

{% block header %}
    {{ page_header }}
{% endblock %}

{% block description %}
    {{page_description}}
{% endblock %}

{% block content %}

    <style>
        txt_grey {
            color: grey;
        }
        .hide {
            display: none;
        }
        .myDIV:hover + .hide {
            display: block;
            color: red;
        }
    </style>

    <form action="" method="post"> {% csrf_token %}
        <table style="width:50%">
            <tr> </tr>
            <tr> </tr>
            <tr> </tr>
            {% for q,d,first,last,has_unit,has_info in q_v_f_l_u_and_i %}

<!--          Show category -->
                {% if first %}
                    <tr style="float:left">  <th> <br> {{q.category}}  </th> </tr>
                {% endif %}

<!--          List questions -->
                <tr>
                    <td>{{forloop.counter}}. {{q.question_text }} {% if has_unit %} [{{q.unit}}] {% endif %}</td>
                    <td>
                        <input id="id_subject"  name={{q.id}} maxlength="20"
                               size="6" required value={{d}} style="float:right;">
                    </td>
                    <td>
                            <button type='submit' name="enter" value=1 hidden="hidden">-</button>
                            <button type='submit' name="remove_field" value={{q.id}} class="button del_button"><b>-</b></button>
                    </td>
<!--          Info Hint -->
                    <td>
                      {% if has_info %}
                            <div class = "myDIV"> ? </div>
                            <div class = "hide"> {{q.info_text}} </div>
                      {% endif %}
                    </td>
                </tr>


<!--                <tr> <td>for so probieren</td></tr>
                {% for new_qd in new_q_d_listlist %}
                <tr> <td>{{new_qd.0}}</td></tr>
                {% empty %}
                <tr> <td>for so empty</td></tr>

                {% endfor %}
                    -->


<!--          Show added questions -->
<!--                {% if last %}
                    {% for new_qd in new_q_d_list%}
                        {% if new_qd.0.category == q.category %}
                            <tr>
                                <td>Question: {{new_qd.0.question_text }}</td>
                                <td> <input id="id_subject" type="text" name={{new_qd.0.id}} maxlength="100" required value={{new_qd.1}}> </td>
                            </tr>
                        {% endif %}
                    {% empty %}
                    {% endfor %}
                    <tr> <td>---</td> </tr>-->

<!--              Option to add question -->
                    <tr>
                        <td> <txt_grey> Posten hinzuf√ºgen: </txt_grey>
                                <select name="new_field" >
                                    <div class="dropdown">
                                        <option value="-1"> ... </option>
                                        <div class="dropdown-content" >
                                        {% for add_q in missing_qs %}
                                            {% if add_q.category == q.category %}
                                                <option value={{add_q.id}}> {{ add_q.name }} </option>
                                            {% endif %}
                                        {% endfor %}
                                        </div>
                                    </div>
                                </select>

                                <input type='submit' name="add_field" value="+" class="add_button" >
                        </td>
                    </tr>

                {% endif %}

            {% endfor %}
            <tr><td><br></td></tr>

<!--      Option to add question of new category -->
            <tr>
                <td> Posten neuer Kategorie:
                    <select name="new_cat">
                        <option value="-1"> ... </option>
                        {% for mc in missing_cats %}
                            <option value={{mc.id}} > {{ mc.name }} </option>
                        {% endfor %}
                    </select>
                    <input type='submit' name="add_cat" value="+" class="add_button" >
                </td>
            {% if cat_added != None %}
                <tr>
                    <td> <b>Neuer Posten aus {{cat_added}}: </b>
                        <select name="new_field">
                            <option value="-1"> ... </option>
                            {% for mc in new_c_q_list %}
                                <option value={{mc.id}} > {{ mc.name }} </option>
                            {% endfor %}
                            <input type='submit' name="add_field" value="+" class="add_button">
                        </select>
                    </td>
                </tr>
            {% endif %}
        </table>
        <br>

<!--  Submit buttons -->
        <table>
            <tr>
                <td> <input type="submit" name="submit form" value="Submit" class="button green_button"> </td>
                <td> <input type="submit" name="reset" value="Reset" class="button orange_button"> </td>
                <td> <input type='button'  name="back" value="Back" onclick="location.href='{{button_link}}'" class="button red_button"> </td>
            </tr>
        </table>
    </form>

{% endblock %}
